/* ===== Bullets by indent with 4-style cycle =====
   1: ●  2: ○  3: ■  4: —  then repeat
   Tweak these if alignment looks off in your theme.
*/
:root {
  --indent-pad: 1.25rem;   /* left padding for lists */
  --mark-left: 0.1rem;     /* small horizontal nudge */
  --mark-top: 0.62em;      /* vertical alignment */
  --dot: 6px;
  --sq: 6px;
  --dash-w: 9px;
  --dash-h: 2px;
  --mark-color: currentColor; /* use text color */
  --mark-fade: color-mix(in srgb, var(--mark-color) 70%, transparent);
}

/* ========== Reading view ========== */
.markdown-rendered ul { list-style: none; padding-left: var(--indent-pad); }
.markdown-rendered ul li { position: relative; }

/* do not override checklists */
.markdown-rendered li.task-list-item::before { content: none !important; }

/* helper mixin-like rules */
@layer obs-bullets {
  /* Level 1: solid circle */
  .rv-level-1::before {
    content: "";
    position: absolute;
    left: calc(-1 * var(--indent-pad) + var(--mark-left));
    top: var(--mark-top);
    width: var(--dot); height: var(--dot);
    border-radius: 50%;
    background: var(--mark-color);
    transform: translateY(-50%);
  }
  /* Level 2: hollow circle */
  .rv-level-2::before {
    content: "";
    position: absolute;
    left: calc(-1 * var(--indent-pad) + var(--mark-left));
    top: var(--mark-top);
    width: var(--dot); height: var(--dot);
    border-radius: 50%;
    background: transparent;
    box-shadow: 0 0 0 2px var(--mark-fade) inset, 0 0 0 1.5px var(--mark-color) inset;
    transform: translateY(-50%);
  }
  /* Level 3: solid square */
  .rv-level-3::before {
    content: "";
    position: absolute;
    left: calc(-1 * var(--indent-pad) + var(--mark-left));
    top: var(--mark-top);
    width: var(--sq); height: var(--sq);
    border-radius: 2px;
    background: var(--mark-color);
    transform: translateY(-50%);
  }
  /* Level 4: short dash */
  .rv-level-4::before {
    content: "";
    position: absolute;
    left: calc(-1 * var(--indent-pad) + var(--mark-left));
    top: var(--mark-top);
    width: var(--dash-w); height: var(--dash-h);
    border-radius: 1px;
    background: var(--mark-color);
    transform: translateY(-50%);
  }
}

/* map nesting depth to our 4-style cycle, then repeat */
.markdown-rendered ul > li:not(.task-list-item)                    { composes: rv-level-1 from obs-bullets; }
.markdown-rendered ul ul > li:not(.task-list-item)                 { composes: rv-level-2 from obs-bullets; }
.markdown-rendered ul ul ul > li:not(.task-list-item)              { composes: rv-level-3 from obs-bullets; }
.markdown-rendered ul ul ul ul > li:not(.task-list-item)           { composes: rv-level-4 from obs-bullets; }

/* repeat 1–4 for deeper levels */
.markdown-rendered ul ul ul ul ul > li:not(.task-list-item)        { composes: rv-level-1 from obs-bullets; }
.markdown-rendered ul ul ul ul ul ul > li:not(.task-list-item)     { composes: rv-level-2 from obs-bullets; }
.markdown-rendered ul ul ul ul ul ul ul > li:not(.task-list-item)  { composes: rv-level-3 from obs-bullets; }
.markdown-rendered ul ul ul ul ul ul ul ul > li:not(.task-list-item){ composes: rv-level-4 from obs-bullets; }

.markdown-rendered ul ul ul ul ul ul ul ul ul > li:not(.task-list-item)       { composes: rv-level-1 from obs-bullets; }
.markdown-rendered ul ul ul ul ul ul ul ul ul ul > li:not(.task-list-item)    { composes: rv-level-2 from obs-bullets; }
.markdown-rendered ul ul ul ul ul ul ul ul ul ul ul > li:not(.task-list-item) { composes: rv-level-3 from obs-bullets; }
.markdown-rendered ul ul ul ul ul ul ul ul ul ul ul ul > li:not(.task-list-item){ composes: rv-level-4 from obs-bullets; }

/* Checkbox alignment in reading view */
.markdown-rendered .task-list-item-checkbox {
  transform: translateX(calc(-1 * var(--indent-pad) + var(--mark-left)));
}

/* ========== Live Preview (editor) ========== */

/* hide native bullet glyphs */
.cm-editor .cm-formatting-list-ul { color: transparent; }

/* Level 1 */
.cm-editor .HyperMD-list-line-1 .list-bullet::after {
  content: "";
  display: inline-block;
  width: var(--dot); height: var(--dot);
  margin-left: calc(-1 * var(--indent-pad));
  margin-right: 0.45rem;
  vertical-align: middle;
  border-radius: 50%;
  background: var(--mark-color);
}
/* Level 2: hollow circle */
.cm-editor .HyperMD-list-line-2 .list-bullet::after {
  content: "";
  display: inline-block;
  width: var(--dot); height: var(--dot);
  margin-left: calc(-1 * var(--indent-pad));
  margin-right: 0.45rem;
  vertical-align: middle;
  border-radius: 50%;
  background: transparent;
  border: 2px solid var(--mark-color);
}
/* Level 3: solid square */
.cm-editor .HyperMD-list-line-3 .list-bullet::after {
  content: "";
  display: inline-block;
  width: var(--sq); height: var(--sq);
  margin-left: calc(-1 * var(--indent-pad));
  margin-right: 0.45rem;
  vertical-align: middle;
  border-radius: 2px;
  background: var(--mark-color);
}
/* Level 4: dash */
.cm-editor .HyperMD-list-line-4 .list-bullet::after {
  content: "";
  display: inline-block;
  width: var(--dash-w); height: var(--dash-h);
  margin-left: calc(-1 * var(--indent-pad));
  margin-right: 0.45rem;
  vertical-align: middle;
  border-radius: 1px;
  background: var(--mark-color);
}

/* Repeat 1–4 for deeper levels up to 12 */
.cm-editor .HyperMD-list-line-5  .list-bullet::after { width: var(--dot); height: var(--dot); border-radius: 50%; background: var(--mark-color); border: none; }
.cm-editor .HyperMD-list-line-6  .list-bullet::after { width: var(--dot); height: var(--dot); border-radius: 50%; background: transparent; border: 2px solid var(--mark-color); }
.cm-editor .HyperMD-list-line-7  .list-bullet::after { width: var(--sq);  height: var(--sq);  border-radius: 2px; background: var(--mark-color); border: none; }
.cm-editor .HyperMD-list-line-8  .list-bullet::after { width: var(--dash-w); height: var(--dash-h); border-radius: 1px; background: var(--mark-color); border: none; }

.cm-editor .HyperMD-list-line-9  .list-bullet::after { width: var(--dot); height: var(--dot); border-radius: 50%; background: var(--mark-color); }
.cm-editor .HyperMD-list-line-10 .list-bullet::after { width: var(--dot); height: var(--dot); border-radius: 50%; background: transparent; border: 2px solid var(--mark-color); }
.cm-editor .HyperMD-list-line-11 .list-bullet::after { width: var(--sq);  height: var(--sq);  border-radius: 2px; background: var(--mark-color); }
.cm-editor .HyperMD-list-line-12 .list-bullet::after { width: var(--dash-w); height: var(--dash-h); border-radius: 1px; background: var(--mark-color); }

/* Checkbox spacing in editor */
.cm-editor input[type="checkbox"].task-list-item-checkbox {
  margin-left: calc(-1 * var(--indent-pad));
  margin-right: 0.45rem;
}
