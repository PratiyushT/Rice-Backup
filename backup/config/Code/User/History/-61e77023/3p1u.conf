#!      ░▒▒▒░░░▓▓           ___________
#!    ░░▒▒▒░░░░░▓▓        //___________/
#!   ░░▒▒▒░░░░░▓▓     _   _ _    _ _____
#!   ░░▒▒░░░░░▓▓▓▓▓▓ | | | | |  | |  __/
#!    ░▒▒░░░░▓▓   ▓▓ | |_| | |_/ /| |___
#!     ░▒▒░░▓▓   ▓▓   \__  |____/ |____/
#!       ░▒▓▓   ▓▓  //____/

# $LOCKSCREEN = hyprlock # preferred LOCKSCREEN e.g swaylock
$LOCKSCREEN = lockscreen.sh # Calls $LOCKSCREEN set from hyprland
$PowerActions = power-action.sh
general   {
    lock_cmd = $LOCKSCREEN
    # unlock_cmd = notify-send "unlock!"
    before_sleep_cmd = $LOCKSCREEN
    # after_sleep_cmd = notify-send "System resumed"
    ignore_dbus_inhibit = false
    ignore_systemd_inhibit = false
}

# Dim Brightness - Battery (1 mins 30 secs)
listener{
    timeout = 
    on-timeout = $PowerActions brightness 
    on-resume = brightnessctl -r
}


# Lock Screen - Battery (2mins)
listener{
    timeout = 5
    on-timeout = $PowerActions lock 
}


# Turn off the Display - Battery (4mins)
listener{
    timeout = 240
    on-timeout = $PowerActions dpms_off 
    on-resume = hyprctl dispatch dpms on
}

# Suspend - Battery (6 minutes)
listener {
    timeout = 360
    on-timeout = $PowerActions suspend
}


# Notification for display dim
listener {
    timeout = 90
    on-timeout = notify-send "Display will be dimmed in 10 secs."
}

# Dims the display - 2 mins when on battery. 
listener {
    timeout = 100
    on-timeout = $PowerActions
    on-resume = brightnessctl -r
}


# Notification for lockscreen
listener {
    timeout = 180
    on-timeout = notify-send "System has been inactive for almost 2 mins. System will be locked in 20 secs."
}
# Lock screen before DPMS off - 4 mins
listener {
    timeout = 200
    on-timeout = $LOCKSCREEN
}

# Notification for DPMS Off
listener {
    timeout = 230
    on-timeout = bash -c '$NotifyOnBattery "System has been inactive for almost 4 mins. Display will be turned off in 20 secs."'
    on-resume =  bash -c '$NotifyOnBattery "Activity detected. Display will not be turned off."'

}

listener {
    timeout =250
    on-timeout = $DisplayOffOnBattery
    on-resume = hyprctl dispatch dpms on
}

# Notification for System Suspend
listener {
    timeout = 600
    on-timeout = bash -c '$NotifyOnBattery "System has been inactive for almost 12 mins. System will be suspended in 20 secs."'
    on-resume =  bash -c '$NotifyOnBattery "Activity detected. System will not be suspended"'

}

# Suspend system (only if on battery) - 12 mins
listener {
    timeout = 620
    on-timeout = $SuspendOnBattery
    on-resume = bash -c 'notify-send "System was suspended on $(date +"%A, %B %d at %I:%M %p")"'
}

# hyprlang noerror true
source = ~/.config/hypridle/*
# hyprlang noerror false
