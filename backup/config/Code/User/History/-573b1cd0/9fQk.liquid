{% doc %}
  @prompt
  Make a Dynamic Product Hotspot Image Block with the following specs: Image Behavior Displays a single wide image that

  scrolls horizontally only to reveal product areas. Vertical scrolling is disabled, and no scrollbars are visible.

  Scrolling is fully contained within the image block and does not affect the rest of the page. Supports manual width

  and height control separately for desktop and mobile viewports. Allows enabling or disabling horizontal scroll

  independently for desktop and mobile. Scrolling is smooth with no jitter, bounce, or abrupt jumps. Product Hotspots

  Supports up to five customizable product hotspots. Each hotspot supports: Individual position using X and Y in

  percentages. Custom size per hotspot. Tooltip direction (Top, Bottom, Left, Right). Individual tooltip width, font,

  and font size. Tooltips display the product image and product title only. "View Product" link and price are excluded.

  Tooltip text color and font style are set globally. Hotspots automatically hide if no product is linked. All hotspots

  are styled as circular, translucent buttons with smooth, outward pulsating borders. No icons or standard borders are

  shown. Circular shape is maintained at all sizes. Collection Hotspot Behaves like any other hotspot with: Custom

  position, size, text color, text, and font. Optional tooltip with the same styling rules. On hover (desktop) or tap

  (mobile), the hotspot expands horizontally into a label (e.g., "SHOP NOW") with a directional arrow. When not active

  (i.e., not hovered or tapped), the arrow is animated continuously. Background and pulsating effects inherit the global

  hotspot color setting. Interaction Logic On desktop: Tooltip appears on hover or first click. On mobile: First tap

  shows tooltip (simulated hover). Second tap executes the click action. Settings Organization (Theme Editor) Global

  Styles Image Settings Scroll Behavior Product Hotspot Settings Tooltip Appearance Collection Hotspot Configuration,

  Add pulsating borders to hotspots except the collection hotspot. Allow control of the speed between tow pulses for

  each hotspot individually., Add pulsating borders to all hotspots., Pulsating borders are not being seen. Fix that.,

  Make the hotspots more translucent. Clicking the hotspot should take me to the linked product's page., Remove tooltip

  from the collection hotspot. Remove pulsating borders from the collection hotspot. Always how an animated arrow icon

  inside the collection hotspot.
{% enddoc %}

{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
        .ai-dynamic-hotspot-container-{{ ai_gen_id }} {

        position: relative;

        width: 100%;

        overflow: hidden;

        border-radius: 8px;

        }



        .ai-dynamic-hotspot-scroll-wrapper-{{ ai_gen_id }} {

        width: 100%;

        height: {{ block.settings.desktop_height }}px;

        overflow-x: {% if block.settings.enable_desktop_scroll %}auto{% else %}hidden{% endif %};

        overflow-y: hidden;

        scroll-behavior: smooth;

        scrollbar-width: none;

        -ms-overflow-style: none;

        }



        .ai-dynamic-hotspot-scroll-wrapper-{{ ai_gen_id }}::-webkit-scrollbar {

        display: none;

        }



        .ai-dynamic-hotspot-image-container-{{ ai_gen_id }} {

        position: relative;

        width: {{ block.settings.desktop_width }}px;

        height: 100%;

        min-width: 100%;

        }



        .ai-dynamic-hotspot-image-{{ ai_gen_id }} {

        width: 100%;

        height: 100%;

        object-fit: cover;

        display: block;

        }



        .ai-dynamic-hotspot-placeholder-{{ ai_gen_id }} {

        width: 100%;

        height: 100%;

        background-color: #f4f4f4;

        display: flex;

        align-items: center;

        justify-content: center;

        }



        .ai-dynamic-hotspot-placeholder-{{ ai_gen_id }} svg {

        width: 100%;

        height: 100%;

        max-width: 300px;

        max-height: 300px;

        opacity: 0.5;

        }



        .ai-hotspot-{{ ai_gen_id }} {

        position: absolute;

        z-index: 10;

        cursor: pointer;

        }



        .ai-hotspot-button-{{ ai_gen_id }} {

        position: relative;

        border: none;

        background: {{ block.settings.hotspot_color | color_modify: 'alpha', block.settings.hotspot_opacity }};

        border-radius: 50%;

        cursor: pointer;

        display: flex;

        align-items: center;

        justify-content: center;

        transition: all 0.3s ease;

        }



        .ai-hotspot-button-{{ ai_gen_id }}:hover {

        background: {{ block.settings.hotspot_color | color_modify: 'alpha', block.settings.hotspot_hover_opacity }};

        }



        {% for i in (1..5) %}

        {% liquid

        assign pulse_speed_key = 'hotspot_' | append: i | append: '_pulse_speed'

        assign pulse_speed = block.settings[pulse_speed_key] | default: 2%}

        .ai-hotspot-button-{{ ai_gen_id }}-{{ i }}::before {

        content: '';

        position: absolute;

        top: -4px;

        left: -4px;

        right: -4px;

        bottom: -4px;

        border-radius: 50%;

        border: 3px solid {{ block.settings.hotspot_color }};

        animation: ai-hotspot-pulse-{{ ai_gen_id }}-{{ i }} {{ pulse_speed }}s infinite;

        opacity: 0.8;

        z-index: -1;

        }



        .ai-hotspot-button-{{ ai_gen_id }}-{{ i }}::after {

        content: '';

        position: absolute;

        top: -8px;

        left: -8px;

        right: -8px;

        bottom: -8px;

        border-radius: 50%;

        border: 2px solid {{ block.settings.hotspot_color }};

        animation: ai-hotspot-pulse-{{ ai_gen_id }}-{{ i }} {{ pulse_speed }}s infinite;

        animation-delay: {{ pulse_speed | divided_by: 4.0 }}s;

        opacity: 0.4;

        z-index: -1;

        }



        @keyframes ai-hotspot-pulse-{{ ai_gen_id }}-{{ i }} {

        0% {

        transform: scale(1);

        opacity: 0.8;

        }

        50% {

        transform: scale(1.3);

        opacity: 0.2;

        }

        100% {

        transform: scale(1.6);

        opacity: 0;

        }

        }

        {% endfor %}



        .ai-hotspot-tooltip-{{ ai_gen_id }} {
        position: absolute;
        background: {{ block.settings.tooltip_bg_color }};
        border-radius: 8px;
        padding: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        z-index: 20;
        pointer-events: none;
        color: {{ block.settings.tooltip_text_color }};
      }



        .ai-hotspot-tooltip-{{ ai_gen_id }}.active {

        opacity: 1;

        visibility: visible;

        pointer-events: auto;

        }



        .ai-hotspot-tooltip-top-{{ ai_gen_id }} {

        bottom: calc(100% + 10px);

        left: 50%;

        transform: translateX(-50%) translateY(5px);

        }



        .ai-hotspot-tooltip-top-{{ ai_gen_id }}.active {

        transform: translateX(-50%) translateY(0);

        }



        .ai-hotspot-tooltip-bottom-{{ ai_gen_id }} {

        top: calc(100% + 10px);

        left: 50%;

        transform: translateX(-50%) translateY(-5px);

        }



        .ai-hotspot-tooltip-bottom-{{ ai_gen_id }}.active {

        transform: translateX(-50%) translateY(0);

        }



        .ai-hotspot-tooltip-left-{{ ai_gen_id }} {

        right: calc(100% + 10px);

        top: 50%;

        transform: translateY(-50%) translateX(5px);

        }



        .ai-hotspot-tooltip-left-{{ ai_gen_id }}.active {

        transform: translateY(-50%) translateX(0);

        }



        .ai-hotspot-tooltip-right-{{ ai_gen_id }} {

        left: calc(100% + 10px);

        top: 50%;

        transform: translateY(-50%) translateX(-5px);

        }



        .ai-hotspot-tooltip-right-{{ ai_gen_id }}.active {

        transform: translateY(-50%) translateX(0);

        }



        .ai-tooltip-product-{{ ai_gen_id }} {

        display: flex;

        align-items: center;

        gap: 10px;

        min-width: 150px;

        }



        .ai-tooltip-product-image-{{ ai_gen_id }} {

        width: 50px;

        height: 50px;

        flex-shrink: 0;

        border-radius: 4px;

        overflow: hidden;

        }



        .ai-tooltip-product-image-{{ ai_gen_id }} img {

        width: 100%;

        height: 100%;

        object-fit: cover;

        }



        .ai-tooltip-product-info-{{ ai_gen_id }} {

        flex: 1;

        }
    .ai-tooltip-product-info-{{ ai_gen_id }}:only-child {
      text-align: center;
    }


        .ai-tooltip-product-title-{{ ai_gen_id }} {

        margin: 0;

        font-size: inherit;

        line-height: 1.3;
        font-family: {{ block.settings.tooltip_font.family }}, {{ block.settings.tooltip_font.fallback_families }};
        /* FIX: Use the new dropdown setting for font weight */
        font-weight: {{ block.settings.tooltip_font_weight }};
        font-size: {{ block.settings.tooltip_font_size }}px;
        }



        .ai-collection-hotspot-{{ ai_gen_id }} {

        position: absolute;

        z-index: 10;

        cursor: pointer;

        }



        .ai-collection-button-{{ ai_gen_id }} {

        position: relative;

        border: none;

        background: {{ block.settings.hotspot_color | color_modify: 'alpha', block.settings.collection_opacity }};

        border-radius: 50%;

        cursor: pointer;

        display: flex;

        align-items: center;

        justify-content: center;

      /* FIX: Use a smoother "ease-out" curve and separate transitions */
  transition: width 0.45s cubic-bezier(0.23, 1, 0.32, 1),
              border-radius 0.45s cubic-bezier(0.23, 1, 0.32, 1),
              background-color 0.3s ease-out;
        padding: 0;

        overflow: hidden;

        white-space: nowrap;

        color: {{ block.settings.collection_text_color }};

        font-family: {{ block.settings.collection_font.family }}, {{ block.settings.collection_font.fallback_families }};

        font-weight: {{ block.settings.collection_font.weight }};

        font-size: {{ block.settings.collection_font_size }}px;

        text-decoration: none;

        width: {{ block.settings.collection_size_inactive }}px;

        height: {{ block.settings.collection_size_inactive }}px;}



        .ai-collection-button-{{ ai_gen_id }}:hover {

        background: {{ block.settings.hotspot_color | color_modify: 'alpha', block.settings.collection_hover_opacity }};

        border-radius: 25px;

        width: {{ block.settings.collection_size_active }}px;

        height: {{ block.settings.collection_size_inactive }}px;

        min-width: {{ block.settings.collection_size_active }}px;

        padding: 0 20px;

        }



        .ai-collection-button-{{ ai_gen_id }}.active {

        background: {{ block.settings.hotspot_color | color_modify: 'alpha', block.settings.collection_hover_opacity }};

        border-radius: 25px;

        width: {{ block.settings.collection_size_active }}px;

        height: {{ block.settings.collection_size_inactive }}px;

        min-width: {{ block.settings.collection_size_active }}px;

        padding: 0 20px;

        }



        .ai-collection-arrow-{{ ai_gen_id }} {

        width: 20px;

        height: 20px;

        animation: ai-collection-arrow-bounce-{{ ai_gen_id }} 1.5s infinite;

        flex-shrink: 0;

        }



        .ai-collection-text-{{ ai_gen_id }} {

        margin-left: 8px;

        opacity: 0;

        transform: translateX(-10px);
        /* FIX: Refine the text animation to complement the button's movement */
        position: absolute;

        left: 28px;

        }



        .ai-collection-button-{{ ai_gen_id }}:hover .ai-collection-text-{{ ai_gen_id }},

        .ai-collection-button-{{ ai_gen_id }}.active .ai-collection-text-{{ ai_gen_id }} {

        opacity: 1;

        transform: translateX(0);

        position: relative;

        left: auto;

        }



        @keyframes ai-collection-arrow-bounce-{{ ai_gen_id }} {

        0%, 100% {

        transform: translateX(0);

        }

        50% {

        transform: translateX(3px);

        }

        }



        @media screen and (max-width: 749px) {

        .ai-dynamic-hotspot-scroll-wrapper-{{ ai_gen_id }} {

        height: {{ block.settings.mobile_height }}px;overflow-x: {% if block.settings.enable_mobile_scroll %}auto{% else %}hidden{% endif %};

        }



        .ai-dynamic-hotspot-image-container-{{ ai_gen_id }} {

        width: {{ block.settings.mobile_width }}px;

        }



        .ai-hotspot-tooltip-{{ ai_gen_id }} {

        font-size: {{ block.settings.tooltip_font_size | times: 0.9 }}px;

        }



        .ai-collection-button-{{ ai_gen_id }} {

        font-size: {{ block.settings.collection_font_size | times: 0.9 }}px;

        width: {{ block.settings.collection_size_inactive | times: 0.9 }}px;

        height: {{ block.settings.collection_size_inactive | times: 0.9 }}px;

        }



        .ai-collection-button-{{ ai_gen_id }}:hover,

        .ai-collection-button-{{ ai_gen_id }}.active {

        width: {{ block.settings.collection_size_active | times: 0.9 }}px;

        height: {{ block.settings.collection_size_inactive | times: 0.9 }}px;

        min-width: {{ block.settings.collection_size_active | times: 0.9 }}px;

        }

        }
{% endstyle %}

<dynamic-hotspot-image-{{ ai_gen_id }}
  class="ai-dynamic-hotspot-container-{{ ai_gen_id }}"

  {{ block.shopify_attributes }}
>
  <div class="ai-dynamic-hotspot-scroll-wrapper-{{ ai_gen_id }}">
    <div class="ai-dynamic-hotspot-image-container-{{ ai_gen_id }}">
      {% if block.settings.image %}
        <img
          src="{{ block.settings.image | image_url: width: 2000 }}"

          alt="{{ block.settings.image.alt | escape }}"

          class="ai-dynamic-hotspot-image-{{ ai_gen_id }}"

          loading="lazy"

          width="{{ block.settings.image.width }}"

          height="{{ block.settings.image.height }}"
        >

      {% else %}
        <div class="ai-dynamic-hotspot-placeholder-{{ ai_gen_id }}">
          {{ 'hero-apparel-1' | placeholder_svg_tag }}
        </div>
      {% endif %}

      {% for i in (1..5) %}
        {% liquid
          assign hotspot_enabled_key = 'hotspot_' | append: i | append: '_enabled'

          assign hotspot_x_key = 'hotspot_' | append: i | append: '_x'

          assign hotspot_y_key = 'hotspot_' | append: i | append: '_y'

          assign hotspot_size_key = 'hotspot_' | append: i | append: '_size'

          assign hotspot_product_key = 'hotspot_' | append: i | append: '_product'

          assign hotspot_tooltip_direction_key = 'hotspot_' | append: i | append: '_tooltip_direction'

          assign hotspot_tooltip_width_key = 'hotspot_' | append: i | append: '_tooltip_width'

          assign hotspot_enabled = block.settings[hotspot_enabled_key]

          assign hotspot_x = block.settings[hotspot_x_key]

          assign hotspot_y = block.settings[hotspot_y_key]

          assign hotspot_size = block.settings[hotspot_size_key]

          assign hotspot_product = block.settings[hotspot_product_key]

          assign hotspot_tooltip_direction = block.settings[hotspot_tooltip_direction_key]

          assign hotspot_tooltip_width = block.settings[hotspot_tooltip_width_key]
        %}

        {% if hotspot_enabled and hotspot_product != blank %}
          <div
            class="ai-hotspot-{{ ai_gen_id }}"
            style="
              left: {{ hotspot_x }}%;
              top: {{ hotspot_y }}%;
              transform: translate(-50%, -50%);
            "
            data-hotspot-id="{{ i }}"
            data-product-url="{{ hotspot_product.url }}"
          >
            <button
              class="ai-hotspot-button-{{ ai_gen_id }} ai-hotspot-button-{{ ai_gen_id }}-{{ i }}"
              style="
                width: {{ hotspot_size }}px;
                height: {{ hotspot_size }}px;
              "
              aria-label="View {{ hotspot_product.title }}"
              aria-expanded="false"
            ></button>

            <div
              class="ai-hotspot-tooltip-{{ ai_gen_id }} ai-hotspot-tooltip-{{ hotspot_tooltip_direction }}-{{ ai_gen_id }}"
              style="width: {{ hotspot_tooltip_width }}px;"
            >
              <div class="ai-tooltip-product-{{ ai_gen_id }}">
                {% if hotspot_product.featured_image %}
                  <div class="ai-tooltip-product-image-{{ ai_gen_id }}">
                    <img
                      src="{{ hotspot_product.featured_image | image_url: width: 100 }}"
                      alt="{{ hotspot_product.featured_image.alt | escape }}"
                      loading="lazy"
                    >
                  </div>
                {% endif %}
                <div class="ai-tooltip-product-info-{{ ai_gen_id }}">
                  <h3 class="ai-tooltip-product-title-{{ ai_gen_id }}">{{ hotspot_product.title }}</h3>
                </div>
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
      With this updated version:

      HTML

      {% for i in (1..5) %}
        {% liquid
          assign hotspot_enabled_key = 'hotspot_' | append: i | append: '_enabled'
          assign hotspot_x_key = 'hotspot_' | append: i | append: '_x'
          assign hotspot_y_key = 'hotspot_' | append: i | append: '_y'
          assign hotspot_size_key = 'hotspot_' | append: i | append: '_size'
          assign hotspot_product_key = 'hotspot_' | append: i | append: '_product'
          assign hotspot_tooltip_direction_key = 'hotspot_' | append: i | append: '_tooltip_direction'
          assign hotspot_tooltip_width_key = 'hotspot_' | append: i | append: '_tooltip_width'

          assign show_image_key = 'hotspot_' | append: i | append: '_show_tooltip_image'

          assign hotspot_enabled = block.settings[hotspot_enabled_key]
          assign hotspot_x = block.settings[hotspot_x_key]
          assign hotspot_y = block.settings[hotspot_y_key]
          assign hotspot_size = block.settings[hotspot_size_key]
          assign hotspot_product = block.settings[hotspot_product_key]
          assign hotspot_tooltip_direction = block.settings[hotspot_tooltip_direction_key]
          assign hotspot_tooltip_width = block.settings[hotspot_tooltip_width_key]
          assign show_tooltip_image = block.settings[show_image_key]
        %}

        {% if hotspot_enabled and hotspot_product != blank %}
          <div
            class="ai-hotspot-{{ ai_gen_id }}"
            style="
              left: {{ hotspot_x }}%;
              top: {{ hotspot_y }}%;
              transform: translate(-50%, -50%);
            "
            data-hotspot-id="{{ i }}"
            data-product-url="{{ hotspot_product.url }}"
          >
            <button
              class="ai-hotspot-button-{{ ai_gen_id }} ai-hotspot-button-{{ ai_gen_id }}-{{ i }}"
              style="
                width: {{ hotspot_size }}px;
                height: {{ hotspot_size }}px;
              "
              aria-label="View {{ hotspot_product.title }}"
              aria-expanded="false"
            ></button>

            <div
              class="ai-hotspot-tooltip-{{ ai_gen_id }} ai-hotspot-tooltip-{{ hotspot_tooltip_direction }}-{{ ai_gen_id }}"
              style="width: {{ hotspot_tooltip_width }}px;"
            >
              <div class="ai-tooltip-product-{{ ai_gen_id }}">
                {%- comment -%} Check if the setting is enabled AND the product has an image {%- endcomment -%}
                {% if show_tooltip_image and hotspot_product.featured_image %}
                  <div class="ai-tooltip-product-image-{{ ai_gen_id }}">
                    <img
                      src="{{ hotspot_product.featured_image | image_url: width: 100 }}"
                      alt="{{ hotspot_product.featured_image.alt | escape }}"
                      loading="lazy"
                    >
                  </div>
                {% endif %}

                <div class="ai-tooltip-product-info-{{ ai_gen_id }}">
                  <h3 class="ai-tooltip-product-title-{{ ai_gen_id }}">{{ hotspot_product.title }}</h3>
                </div>
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}

      {% if block.settings.collection_enabled %}
        <div
          class="ai-collection-hotspot-{{ ai_gen_id }}"

          style="
            left: {{ block.settings.collection_x }}%;

            top: {{ block.settings.collection_y }}%;

            transform: translate(-{{ block.settings.collection_size_inactive | divided_by: 2.0 }}px, -50%);
          "
        >
          <a
            href="{{ block.settings.collection_link }}"

            class="ai-collection-button-{{ ai_gen_id }}"

            aria-label="{{ block.settings.collection_text }}"
          >
            <svg class="ai-collection-arrow-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="currentColor">
              <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
            </svg>

            <span class="ai-collection-text-{{ ai_gen_id }}">{{ block.settings.collection_text }}</span>
          </a>
        </div>
      {% endif %}
    </div>
  </div>
</dynamic-hotspot-image-{{ ai_gen_id }}>

<script>
  (function() {

  class DynamicHotspotImage{{ ai_gen_id }} extends HTMLElement {

  constructor() {

  super();

  this.isMobile = window.innerWidth <= 749;

  this.activeTooltip = null;

  this.mobileClickStates = new Map();

  }



  connectedCallback() {

  this.setupEventListeners();

  }



  setupEventListeners() {

  const hotspots = this.querySelectorAll('.ai-hotspot-{{ ai_gen_id }}');

  const collectionHotspot = this.querySelector('.ai-collection-hotspot-{{ ai_gen_id }}');



  hotspots.forEach(hotspot => {

  const button = hotspot.querySelector('.ai-hotspot-button-{{ ai_gen_id }}');

  const tooltip = hotspot.querySelector('.ai-hotspot-tooltip-{{ ai_gen_id }}');

  const hotspotId = hotspot.dataset.hotspotId;

  const productUrl = hotspot.dataset.productUrl;



  if (this.isMobile) {

  button.addEventListener('click', (e) => {

  e.preventDefault();

  this.handleMobileClick(hotspot, tooltip, button, hotspotId, productUrl);

  });

  } else {

  button.addEventListener('mouseenter', () => {

  this.showTooltip(tooltip, button);

  });



  button.addEventListener('mouseleave', () => {

  this.hideTooltip(tooltip, button);

  });



  button.addEventListener('click', (e) => {

  e.preventDefault();

  if (productUrl) {

  window.location.href = productUrl;

  }

  });

  }

  });



  if (collectionHotspot) {

  const collectionButton = collectionHotspot.querySelector('.ai-collection-button-{{ ai_gen_id }}');



  if (this.isMobile) {

  collectionButton.addEventListener('click', (e) => {

  if (!collectionButton.classList.contains('active')) {

  e.preventDefault();

  collectionButton.classList.add('active');

  setTimeout(() => {

  collectionButton.classList.remove('active');

  }, 2000);

  }

  });

  } else {

  collectionButton.addEventListener('mouseenter', () => {

  collectionButton.classList.add('active');

  });



  collectionButton.addEventListener('mouseleave', () => {

  collectionButton.classList.remove('active');

  });

  }

  }document.addEventListener('click', (e) => {

  if (!e.target.closest('.ai-hotspot-{{ ai_gen_id }}') && !e.target.closest('.ai-collection-hotspot-{{ ai_gen_id }}')) {

  this.hideAllTooltips();

  this.mobileClickStates.clear();

  }

  });

  }



  handleMobileClick(hotspot, tooltip, button, hotspotId, productUrl) {

  const currentState = this.mobileClickStates.get(hotspotId) || 0;



  if (currentState === 0) {

  this.hideAllTooltips();

  this.mobileClickStates.clear();

  this.showTooltip(tooltip, button);

  this.mobileClickStates.set(hotspotId, 1);

  } else {

  if (productUrl) {

  window.location.href = productUrl;

  }

  }

  }



  showTooltip(tooltip, button) {

  this.hideAllTooltips();

  tooltip.classList.add('active');

  button.setAttribute('aria-expanded', 'true');

  this.activeTooltip = tooltip;

  }



  hideTooltip(tooltip, button) {

  tooltip.classList.remove('active');

  button.setAttribute('aria-expanded', 'false');

  if (this.activeTooltip === tooltip) {

  this.activeTooltip = null;

  }

  }



  hideAllTooltips() {

  const tooltips = this.querySelectorAll('.ai-hotspot-tooltip-{{ ai_gen_id }}');

  const buttons = this.querySelectorAll('.ai-hotspot-button-{{ ai_gen_id }}');

  tooltips.forEach(tooltip => tooltip.classList.remove('active'));

  buttons.forEach(button => button.setAttribute('aria-expanded', 'false'));



  this.activeTooltip = null;

  }

  }



  customElements.define('dynamic-hotspot-image-{{ ai_gen_id }}', DynamicHotspotImage{{ ai_gen_id }});

  })();
</script>

{% schema %}
{
  "name": "Dynamic Product Hotspot",

  "tag": null,

  "settings": [
    {
      "type": "header",

      "content": "Image Settings"
    },

    {
      "type": "image_picker",

      "id": "image",

      "label": "Image"
    },

    {
      "type": "range",

      "id": "desktop_width",

      "min": 800,

      "max": 2000,

      "step": 50,

      "unit": "px",

      "label": "Desktop width",

      "default": 800
    },

    {
      "type": "range",

      "id": "desktop_height",

      "min": 300,

      "max": 800,

      "step": 25,

      "unit": "px",

      "label": "Desktop height",

      "default": 500
    },

    {
      "type": "range",

      "id": "mobile_width",

      "min": 400,

      "max": 1600,

      "step": 25,

      "unit": "px",

      "label": "Mobile width",

      "default": 800
    },

    {
      "type": "range",

      "id": "mobile_height",

      "min": 200,

      "max": 800,

      "step": 25,

      "unit": "px",

      "label": "Mobile height",

      "default": 300
    },

    {
      "type": "header",

      "content": "Scroll Behavior"
    },

    {
      "type": "checkbox",

      "id": "enable_desktop_scroll",

      "label": "Enable desktop horizontal scroll",

      "default": false
    },

    {
      "type": "checkbox",

      "id": "enable_mobile_scroll",

      "label": "Enable mobile horizontal scroll",

      "default": true
    },

    {
      "type": "header",

      "content": "Global Styles"
    },

    {
      "type": "color",

      "id": "hotspot_color",

      "label": "Hotspot color",

      "default": "#000000"
    },

    {
      "type": "range",

      "id": "hotspot_opacity",

      "min": 0,

      "max": 1,

      "step": 0.1,

      "label": "Product hotspot opacity",

      "default": 0.5
    },

    {
      "type": "range",

      "id": "hotspot_hover_opacity",

      "min": 0,

      "max": 1,

      "step": 0.1,

      "label": "Product hotspot hover opacity",

      "default": 0.8
    },

    {
      "type": "header",

      "content": "Tooltip Appearance"
    },

    {
      "type": "color",

      "id": "tooltip_bg_color",

      "label": "Tooltip background",

      "default": "#ffffff"
    },

    {
      "type": "color",

      "id": "tooltip_text_color",

      "label": "Tooltip text color",

      "default": "#000000"
    },

    {
      "type": "font_picker",

      "id": "tooltip_font",

      "label": "Tooltip font",

      "default": "newsreader_n4"
    },
    {
      "type": "select",
      "id": "tooltip_font_weight",
      "label": "Tooltip font weight",
      "options": [
        { "value": "300", "label": "Light" },
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi-bold" },
        { "value": "700", "label": "Bold" },
        { "value": "800", "label": "Extra-bold" }
      ],
      "default": "400"
    },
    {
      "type": "range",

      "id": "tooltip_font_size",

      "min": 10,

      "max": 20,

      "step": 1,

      "unit": "px",

      "label": "Tooltip font size",

      "default": 14
    },

    {
      "type": "header",

      "content": "Collection Hotspot Configuration"
    },

    {
      "type": "checkbox",

      "id": "collection_enabled",

      "label": "Enable collection hotspot",

      "default": true
    },

    {
      "type": "range",

      "id": "collection_x",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Horizontal Position",

      "default": 50
    },

    {
      "type": "range",

      "id": "collection_y",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Vertical Position",

      "default": 50
    },

    {
      "type": "range",

      "id": "collection_size_inactive",

      "min": 20,

      "max": 80,

      "step": 2,

      "unit": "px",

      "label": "Inactive size",

      "default": 50
    },

    {
      "type": "range",

      "id": "collection_size_active",

      "min": 100,

      "max": 200,

      "step": 5,

      "unit": "px",

      "label": "Active size (width)",

      "default": 140
    },

    {
      "type": "text",

      "id": "collection_text",

      "label": "Collection text",

      "default": "SHOP NOW"
    },

    {
      "type": "url",

      "id": "collection_link",

      "label": "Collection link"
    },

    {
      "type": "color",

      "id": "collection_text_color",

      "label": "Collection text color",

      "default": "#ffffff"
    },

    {
      "type": "range",

      "id": "collection_opacity",

      "min": 0,

      "max": 1,

      "step": 0.1,

      "label": "Collection hotspot opacity",

      "default": 0.4
    },

    {
      "type": "range",

      "id": "collection_hover_opacity",

      "min": 0,

      "max": 1,

      "step": 0.1,

      "label": "Collection hotspot hover opacity",

      "default": 0.6
    },

    {
      "type": "font_picker",

      "id": "collection_font",

      "label": "Collection font",

      "default": "helvetica_n7"
    },

    {
      "type": "range",

      "id": "collection_font_size",

      "min": 10,

      "max": 18,

      "step": 1,

      "unit": "px",

      "label": "Collection font size",

      "default": 12
    },

    {
      "type": "header",

      "content": "Product Hotspot 1"
    },

    {
      "type": "checkbox",

      "id": "hotspot_1_enabled",

      "label": "Enable hotspot 1",

      "default": true
    },

    {
      "type": "range",

      "id": "hotspot_1_x",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Horizontal position",

      "default": 25
    },

    {
      "type": "range",

      "id": "hotspot_1_y",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Vertical Position",

      "default": 25
    },

    {
      "type": "range",

      "id": "hotspot_1_size",

      "min": 12,

      "max": 60,

      "step": 2,

      "unit": "px",

      "label": "Size",

      "default": 30
    },

    {
      "type": "range",

      "id": "hotspot_1_pulse_speed",

      "min": 1,

      "max": 5,

      "step": 0.5,

      "unit": "s",

      "label": "Pulse speed",

      "default": 2
    },

    {
      "type": "product",

      "id": "hotspot_1_product",

      "label": "Product"
    },

    {
      "type": "select",

      "id": "hotspot_1_tooltip_direction",

      "label": "Tooltip direction",

      "options": [
        { "value": "top", "label": "Top" },

        { "value": "bottom", "label": "Bottom" },

        { "value": "left", "label": "Left" },

        { "value": "right", "label": "Right" }
      ],

      "default": "top"
    },

    {
      "type": "range",

      "id": "hotspot_1_tooltip_width",

      "min": 150,

      "max": 300,

      "step": 10,

      "unit": "px",

      "label": "Tooltip width",

      "default": 200
    },
    {
      "type": "checkbox",
      "id": "hotspot_1_show_tooltip_image",
      "label": "Show tooltip image",
      "default": true
    },
    {
      "type": "header",

      "content": "Product Hotspot 2"
    },

    {
      "type": "checkbox",

      "id": "hotspot_2_enabled",

      "label": "Enable hotspot 2",

      "default": true
    },

    {
      "type": "range",

      "id": "hotspot_2_x",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Horizontal Position",

      "default": 50
    },

    {
      "type": "range",

      "id": "hotspot_2_y",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Vertical Position",

      "default": 50
    },

    {
      "type": "range",

      "id": "hotspot_2_size",

      "min": 12,

      "max": 60,

      "step": 2,

      "unit": "px",

      "label": "Size",

      "default": 30
    },

    {
      "type": "range",

      "id": "hotspot_2_pulse_speed",

      "min": 1,

      "max": 5,

      "step": 0.5,

      "unit": "s",

      "label": "Pulse speed",

      "default": 2
    },

    {
      "type": "product",

      "id": "hotspot_2_product",

      "label": "Product"
    },

    {
      "type": "select",

      "id": "hotspot_2_tooltip_direction",

      "label": "Tooltip direction",

      "options": [
        { "value": "top", "label": "Top" },

        { "value": "bottom", "label": "Bottom" },

        { "value": "left", "label": "Left" },

        { "value": "right", "label": "Right" }
      ],

      "default": "top"
    },

    {
      "type": "range",

      "id": "hotspot_2_tooltip_width",

      "min": 150,

      "max": 300,

      "step": 10,

      "unit": "px",

      "label": "Tooltip width",

      "default": 200
    },
    {
      "type": "checkbox",
      "id": "hotspot_2_show_tooltip_image",
      "label": "Show tooltip image",
      "default": true
    },
    {
      "type": "header",

      "content": "Product Hotspot 3"
    },

    {
      "type": "checkbox",

      "id": "hotspot_3_enabled",

      "label": "Enable hotspot 3",

      "default": true
    },

    {
      "type": "range",

      "id": "hotspot_3_x",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Horizontal Position",

      "default": 75
    },

    {
      "type": "range",

      "id": "hotspot_3_y",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Vertical Position",

      "default": 25
    },

    {
      "type": "range",

      "id": "hotspot_3_size",

      "min": 12,

      "max": 60,

      "step": 2,

      "unit": "px",

      "label": "Size",

      "default": 30
    },

    {
      "type": "range",

      "id": "hotspot_3_pulse_speed",

      "min": 1,

      "max": 5,

      "step": 0.5,

      "unit": "s",

      "label": "Pulse speed",

      "default": 2
    },

    {
      "type": "product",

      "id": "hotspot_3_product",

      "label": "Product"
    },

    {
      "type": "select",

      "id": "hotspot_3_tooltip_direction",

      "label": "Tooltip direction",

      "options": [
        { "value": "top", "label": "Top" },

        { "value": "bottom", "label": "Bottom" },

        { "value": "left", "label": "Left" },

        { "value": "right", "label": "Right" }
      ],

      "default": "top"
    },

    {
      "type": "range",

      "id": "hotspot_3_tooltip_width",

      "min": 150,

      "max": 300,

      "step": 10,

      "unit": "px",

      "label": "Tooltip width",

      "default": 200
    },
    {
      "type": "checkbox",
      "id": "hotspot_3_show_tooltip_image",
      "label": "Show tooltip image",
      "default": true
    },
    {
      "type": "header",

      "content": "Product Hotspot 4"
    },

    {
      "type": "checkbox",

      "id": "hotspot_4_enabled",

      "label": "Enable hotspot 4",

      "default": false
    },

    {
      "type": "range",

      "id": "hotspot_4_x",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Horizontal Position",

      "default": 25
    },

    {
      "type": "range",

      "id": "hotspot_4_y",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Vertical Position",

      "default": 75
    },

    {
      "type": "range",

      "id": "hotspot_4_size",

      "min": 12,

      "max": 60,

      "step": 2,

      "unit": "px",

      "label": "Size",

      "default": 30
    },

    {
      "type": "range",

      "id": "hotspot_4_pulse_speed",

      "min": 1,

      "max": 5,

      "step": 0.5,

      "unit": "s",

      "label": "Pulse speed",

      "default": 2
    },

    {
      "type": "product",

      "id": "hotspot_4_product",

      "label": "Product"
    },

    {
      "type": "select",

      "id": "hotspot_4_tooltip_direction",

      "label": "Tooltip direction",

      "options": [
        { "value": "top", "label": "Top" },

        { "value": "bottom", "label": "Bottom" },

        { "value": "left", "label": "Left" },

        { "value": "right", "label": "Right" }
      ],

      "default": "top"
    },

    {
      "type": "range",

      "id": "hotspot_4_tooltip_width",

      "min": 150,

      "max": 300,

      "step": 10,

      "unit": "px",

      "label": "Tooltip width",

      "default": 200
    },
    {
      "type": "checkbox",
      "id": "hotspot_4_show_tooltip_image",
      "label": "Show tooltip image",
      "default": true
    },
    {
      "type": "header",

      "content": "Product Hotspot 5"
    },

    {
      "type": "checkbox",

      "id": "hotspot_5_enabled",

      "label": "Enable hotspot 5",

      "default": false
    },

    {
      "type": "range",

      "id": "hotspot_5_x",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Horizontal Position",

      "default": 75
    },

    {
      "type": "range",

      "id": "hotspot_5_y",

      "min": 0,

      "max": 100,

      "step": 1,

      "unit": "%",

      "label": "Vertical Position",

      "default": 75
    },

    {
      "type": "range",

      "id": "hotspot_5_size",

      "min": 12,

      "max": 60,

      "step": 2,

      "unit": "px",

      "label": "Size",

      "default": 30
    },

    {
      "type": "range",

      "id": "hotspot_5_pulse_speed",

      "min": 1,

      "max": 5,

      "step": 0.5,

      "unit": "s",

      "label": "Pulse speed",

      "default": 2
    },

    {
      "type": "product",

      "id": "hotspot_5_product",

      "label": "Product"
    },

    {
      "type": "select",

      "id": "hotspot_5_tooltip_direction",

      "label": "Tooltip direction",

      "options": [
        { "value": "top", "label": "Top" },

        { "value": "bottom", "label": "Bottom" },

        { "value": "left", "label": "Left" },

        { "value": "right", "label": "Right" }
      ],

      "default": "top"
    },

    {
      "type": "range",

      "id": "hotspot_5_tooltip_width",

      "min": 150,

      "max": 300,

      "step": 10,

      "unit": "px",

      "label": "Tooltip width",

      "default": 200
    },
    {
      "type": "checkbox",
      "id": "hotspot_5_show_tooltip_image",
      "label": "Show tooltip image",
      "default": true
    }
  ],

  "presets": [
    {
      "name": "Image Banner w/ Product Hotspot"
    }
  ]
}
{% endschema %}
